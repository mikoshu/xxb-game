var people=function(){this.init()};people.prototype.init=function(){this.width=85*radio,this.height=65*radio,this.R=200*radio,this.r=50*radio,this.num=3,this.all=30,this.x=[],this.y=[],this.speed=[],this.baseSpeed=400,this.isTouch=[],this.success=[],this.count=[],this.blood=[],this.showBlood=[],this.attack=10,this.interval=50,this.score=0,this.getScort=10,this.pre=15,this.imgIndex=[],this.img=[];for(var t=0;t<this.all;t++)this.born(t)},people.prototype.level=function(t){t>150&&(this.num=parseInt(t/150)+3>15?15:parseInt(t/150)+3,this.baseSpeed=400-20*parseInt(t/200))},people.prototype.draw=function(){this.level(this.score);for(var t=0;t<this.num;t++)this.showBlood[t]&&this.drowBlood(t,this.blood[t].x,this.blood[t].y),ctx.drawImage(this.img[t],parseInt(this.imgIndex[t]/this.pre)*this.width,0,this.width,this.height,this.x[t]-this.width/2,this.y[t]-this.height/2,this.width,this.height),this.boom(t),this.add(t),this.imgIndex[t]+=1,this.imgIndex[t]>2*this.pre&&(this.imgIndex[t]=0)},people.prototype.born=function(t){var i=Math.random()-.5;this.x[t]=i>0?1500*i+win_w:1500*i;var h=Math.random()-.5;h>0?(this.y[t]=1500*h+win_h,this.img[t]=document.getElementById("role2")):(this.y[t]=1500*h,this.img[t]=document.getElementById("role")),this.speed[t]={};var s=200*Math.random()+this.baseSpeed;this.speed[t].x=(win_w/2-this.x[t])/s,this.speed[t].y=(win_h/2-this.y[t])/s,this.isTouch[t]=!1,this.success[t]=!1,this.count[t]=0,this.showBlood[t]=!1,this.blood[t]={},this.imgIndex[t]=0},people.prototype.boom=function(t){var i=win_w/2-this.x[t],h=win_h/2-this.y[t],s=Me.x-this.x[t],e=Me.y-this.y[t];Math.sqrt(s*s+e*e)<this.r+Me.r&&(this.isTouch[t]||(this.score+=this.getScort,document.getElementById("score").innerHTML=this.score,shake(),this.blood[t]={x:this.x[t],y:this.y[t],count:0},this.showBlood[t]=!0),this.isTouch[t]=!0),this.isTouch[t]?(this.x[t]-=5*this.speed[t].x,this.y[t]-=5*this.speed[t].y):Math.sqrt(i*i+h*h)>this.R+this.r?(this.x[t]+=this.speed[t].x,this.y[t]+=this.speed[t].y):this.success[t]?(this.count[t]+=1,this.count[t]==this.interval&&(this.count[t]=0,star.nowLife=star.nowLife>this.attack?star.nowLife-this.attack:0)):(star.nowLife=star.nowLife>this.attack?star.nowLife-this.attack:0,this.success[t]=!0)},people.prototype.add=function(t){this.isTouch[t]&&(this.x[t]<-this.width-100||this.x[t]>win_w+100||this.y[t]<-this.height-100||this.y[t]>win_h+100)&&this.born(t)},people.prototype.drowBlood=function(t,i,h){var s=Math.sqrt(Math.pow(win_w/2-i,2)+Math.pow(win_h/2-h,2)),e=Math.acos((i-win_w/2)/s);e=win_h/2>h?e:-e,h>win_h/2&&win_w/2>i||win_h/2>h&&i>win_w/2?(i=win_w/2>i?i+this.width/2:i-this.width/2,h=win_h/2>h?h-this.height/2:h+this.height/2):(i=win_w/2>i?i-this.width/2:i+this.width/2,h=win_h/2>h?h+this.height/2:h-this.height/2),ctx.save(),ctx.translate(i,h),ctx.rotate(-e),ctx.drawImage(document.getElementById("blood"),0,0,330,81),ctx.translate(0,0),ctx.restore()};